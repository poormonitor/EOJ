var i=0,interval=800;function auto_refresh(){interval=800;for(var e=window.document.getElementById("result-tab").rows,t=e.length-1;0<t;t--){var s=$(e[t].cells[3].children[0]).attr("result");e[t].cells[3].className="td_result";var n=e[t].cells[0].innerHTML;if(s<4){window.setTimeout("fresh_result("+n+")",interval),console.log("auto_refresh "+n+" actived!");break}}}function findRow(e){for(var t=window.document.getElementById("result-tab").rows,s=1;s<t.length;s++){if(t[s].cells[0].innerHTML==e)return t[s]}}function fresh_result(s){var n;(n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=function(){if(4==n.readyState&&200==n.status){window.document.getElementById("result-tab");var e=findRow(s),t=n.responseText.split(",");t[0]=parseInt(t[0]);if(e.cells[4].innerHTML=t[1],e.cells[5].innerHTML=t[2],"none"!=t[3]&&(e.cells[9].innerHTML=t[3]),t[0]<4)-1==e.cells[3].innerHTML.indexOf("loader")&&(e.cells[3].innerHTML+="<img width=18 style='margin-left:3px;' src='https://cdn.jsdelivr.net/gh/poormonitor/image@master/base/loading.gif'>"),interval*=1.5,window.setTimeout("fresh_result("+s+")",interval);else{switch(t[0]){case 4:e.cells[3].innerHTML="<a href=reinfo.php?sid="+s+" class='"+judge_color[t[0]]+"'>"+judge_result[t[0]]+"</a>";break;case 5:case 6:case 7:case 8:case 9:case 10:e.cells[3].innerHTML="<a href=reinfo.php?sid="+s+" class='"+judge_color[t[0]]+"'>"+judge_result[t[0]]+" AC:"+t[4].trim()+"%</a>";break;case 11:e.cells[3].innerHTML="<a href=ceinfo.php?sid="+s+" class='"+judge_color[t[0]]+"'>"+judge_result[t[0]]+"</a>"}auto_refresh()}}},n.open("GET","status-ajax.php?solution_id="+s,!0),n.send()}var hj_ss="<select class='http_judge form-control' length='2' name='result'>";for(i=0;i<10;i++)hj_ss+="\t<option value='"+i+"'>"+judge_result[i]+" </option>";function http_judge(e){var s=$(e).parent()[0].children[0].value;return $.post("admin/problem_judge.php",$(e).parent().serialize(),function(e,t){"success"==t&&window.setTimeout("fresh_result("+s+")",1e3)}),!1}hj_ss+="</select>",hj_ss+="<input name='manual' type='hidden'>",hj_ss+="<input class='http_judge form-control' size=5 title='输入判定原因与提示' name='explain' type='text'>",hj_ss+="<input type='button' class='http_judge btn' name='manual' value='确定' onclick='http_judge(this)' >",$(".http_judge_form").append(hj_ss),auto_refresh(),$(".http_judge_form").hide();